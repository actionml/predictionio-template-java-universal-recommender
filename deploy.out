[INFO] [Runner$] Submission command: /Users/James/Documents/Cornell/Semester8/Open-SourceSE/apache-predictionio-0.10.0-incubating/PredictionIO-0.10.0-incubating/vendors/spark-1.5.1-bin-hadoop2.6/bin/spark-submit --class org.apache.predictionio.workflow.CreateServer --jars file:/Users/James/Documents/Cornell/Semester8/Open-SourceSE/ur_fork/target/scala-2.10/template-java-parallel-universal-recommendation-assembly-0.1.0-deps.jar,file:/Users/James/Documents/Cornell/Semester8/Open-SourceSE/ur_fork/target/scala-2.10/template-java-parallel-universal-recommendation_2.10-0.1.0.jar --files file:/Users/James/Documents/Cornell/Semester8/Open-SourceSE/apache-predictionio-0.10.0-incubating/PredictionIO-0.10.0-incubating/conf/log4j.properties --driver-class-path /Users/James/Documents/Cornell/Semester8/Open-SourceSE/apache-predictionio-0.10.0-incubating/PredictionIO-0.10.0-incubating/conf file:/Users/James/Documents/Cornell/Semester8/Open-SourceSE/apache-predictionio-0.10.0-incubating/PredictionIO-0.10.0-incubating/lib/pio-assembly-0.10.0-incubating.jar --engineInstanceId AVvbIBZe-J18G4mW3DLd --engine-variant file:/Users/James/Documents/Cornell/Semester8/Open-SourceSE/ur_fork/engine.json --ip 0.0.0.0 --port 8000 --event-server-ip 0.0.0.0 --event-server-port 7070 --json-extractor Both --env PIO_ENV_LOADED=1,PIO_STORAGE_REPOSITORIES_METADATA_NAME=pio_meta,PIO_FS_BASEDIR=/Users/James/.pio_store,PIO_STORAGE_SOURCES_ELASTICSEARCH_HOSTS=localhost,PIO_HOME=/Users/James/Documents/Cornell/Semester8/Open-SourceSE/apache-predictionio-0.10.0-incubating/PredictionIO-0.10.0-incubating,PIO_FS_ENGINESDIR=/Users/James/.pio_store/engines,PIO_STORAGE_SOURCES_LOCALFS_PATH=/Users/James/.pio_store/models,PIO_STORAGE_SOURCES_PGSQL_URL=jdbc:postgresql://localhost/pio,PIO_STORAGE_SOURCES_ELASTICSEARCH_TYPE=elasticsearch,PIO_STORAGE_REPOSITORIES_METADATA_SOURCE=ELASTICSEARCH,PIO_STORAGE_REPOSITORIES_MODELDATA_SOURCE=PGSQL,PIO_STORAGE_REPOSITORIES_EVENTDATA_NAME=pio_event,PIO_STORAGE_SOURCES_PGSQL_PASSWORD=pio,PIO_STORAGE_SOURCES_ELASTICSEARCH_CLUSTERNAME=james_es,PIO_STORAGE_SOURCES_ELASTICSEARCH_HOME=/Users/James/Documents/Cornell/Semester8/Open-SourceSE/apache-predictionio-0.10.0-incubating/PredictionIO-0.10.0-incubating/vendors/elasticsearch-1.4.4,PIO_STORAGE_SOURCES_PGSQL_TYPE=jdbc,PIO_FS_TMPDIR=/Users/James/.pio_store/tmp,PIO_STORAGE_SOURCES_PGSQL_USERNAME=pio,PIO_STORAGE_REPOSITORIES_MODELDATA_NAME=pio_model,PIO_STORAGE_REPOSITORIES_EVENTDATA_SOURCE=PGSQL,PIO_CONF_DIR=/Users/James/Documents/Cornell/Semester8/Open-SourceSE/apache-predictionio-0.10.0-incubating/PredictionIO-0.10.0-incubating/conf,PIO_STORAGE_SOURCES_ELASTICSEARCH_PORTS=9300,PIO_STORAGE_SOURCES_LOCALFS_TYPE=localfs
[WARN] [WorkflowUtils$] Non-empty parameters supplied to org.template.Preparator, but its constructor does not accept any arguments. Stubbing with empty parameters.
[WARN] [WorkflowUtils$] Non-empty parameters supplied to org.template.Serving, but its constructor does not accept any arguments. Stubbing with empty parameters.
[INFO] [Remoting] Starting remoting
[INFO] [Remoting] Remoting started; listening on addresses :[akka.tcp://sparkDriver@192.168.0.5:56381]
[WARN] [MetricsSystem] Using default name DAGScheduler for source because spark.app.id is not set.
[INFO] [Engine] Using persisted model
[INFO] [Engine] Loaded model org.apache.predictionio.data.storage.NullModel for algorithm org.template.Algorithm
[INFO] [MasterActor] Undeploying any existing engine instance at http://0.0.0.0:8000
[ERROR] [TcpListener] Bind failed for TCP channel on endpoint [/0.0.0.0:8000]
[WARN] [HttpListener] Bind to /0.0.0.0:8000 failed
[ERROR] [MasterActor] Bind failed. Retrying... (2 more trial(s))
[INFO] [HttpListener] Bound to /0.0.0.0:8000
[INFO] [MasterActor] Engine is deployed and running. Engine API is live at http://0.0.0.0:8000.
[INFO] [Algorithm] Query received, user id: ${query.user}, item id: ${query.item}
[INFO] [Algorithm] Number of blacklisted items: 0
[INFO] [Algorithm] Query : {"size":20,"query":{"bool":{"should":[{"terms":{"purchase":["Galaxy","Iphone 6","Ipad-retina","Iphone 5","Iphone 4"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:43.500-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:43.500-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}
[ERROR] [ServerActor] Query:

{
    "user": "u1"
}

Stack Trace:
org.elasticsearch.action.search.SearchPhaseExecutionException: Failed to execute phase [query], all shards failed; shardFailures {[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][0]: SearchParseException[[urindex_1494030009479][0]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":["Galaxy","Iphone 6","Ipad-retina","Iphone 5","Iphone 4"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:43.500-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:43.500-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][1]: SearchParseException[[urindex_1494030009479][1]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":["Galaxy","Iphone 6","Ipad-retina","Iphone 5","Iphone 4"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:43.500-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:43.500-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][2]: SearchParseException[[urindex_1494030009479][2]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":["Galaxy","Iphone 6","Ipad-retina","Iphone 5","Iphone 4"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:43.500-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:43.500-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][3]: SearchParseException[[urindex_1494030009479][3]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":["Galaxy","Iphone 6","Ipad-retina","Iphone 5","Iphone 4"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:43.500-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:43.500-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][4]: SearchParseException[[urindex_1494030009479][4]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":["Galaxy","Iphone 6","Ipad-retina","Iphone 5","Iphone 4"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:43.500-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:43.500-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }
	at org.elasticsearch.action.search.type.TransportSearchTypeAction$BaseAsyncAction.onFirstPhaseResult(TransportSearchTypeAction.java:233)
	at org.elasticsearch.action.search.type.TransportSearchTypeAction$BaseAsyncAction$1.onFailure(TransportSearchTypeAction.java:179)
	at org.elasticsearch.search.action.SearchServiceTransportAction$23.run(SearchServiceTransportAction.java:565)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)



[INFO] [Algorithm] Query received, user id: ${query.user}, item id: ${query.item}
[INFO] [Algorithm] Number of blacklisted items: 0
[INFO] [Algorithm] Query : {"size":20,"query":{"bool":{"should":[{"terms":{"purchase":["Galaxy","Nexus","Iphone 5"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:43.786-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:43.786-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}
[ERROR] [ServerActor] Query:

{
    "user": "U 2"
}

Stack Trace:
org.elasticsearch.action.search.SearchPhaseExecutionException: Failed to execute phase [query], all shards failed; shardFailures {[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][0]: SearchParseException[[urindex_1494030009479][0]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":["Galaxy","Nexus","Iphone 5"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:43.786-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:43.786-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][1]: SearchParseException[[urindex_1494030009479][1]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":["Galaxy","Nexus","Iphone 5"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:43.786-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:43.786-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][2]: SearchParseException[[urindex_1494030009479][2]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":["Galaxy","Nexus","Iphone 5"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:43.786-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:43.786-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][3]: SearchParseException[[urindex_1494030009479][3]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":["Galaxy","Nexus","Iphone 5"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:43.786-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:43.786-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][4]: SearchParseException[[urindex_1494030009479][4]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":["Galaxy","Nexus","Iphone 5"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:43.786-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:43.786-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }
	at org.elasticsearch.action.search.type.TransportSearchTypeAction$BaseAsyncAction.onFirstPhaseResult(TransportSearchTypeAction.java:233)
	at org.elasticsearch.action.search.type.TransportSearchTypeAction$BaseAsyncAction$1.onFailure(TransportSearchTypeAction.java:179)
	at org.elasticsearch.search.action.SearchServiceTransportAction$23.run(SearchServiceTransportAction.java:565)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)



[INFO] [Algorithm] Query received, user id: ${query.user}, item id: ${query.item}
[INFO] [Algorithm] Number of blacklisted items: 0
[INFO] [Algorithm] Query : {"size":20,"query":{"bool":{"should":[{"terms":{"purchase":["Surface"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:43.836-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:43.836-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}
[ERROR] [ServerActor] Query:

{
    "user": "u-3"
}

Stack Trace:
org.elasticsearch.action.search.SearchPhaseExecutionException: Failed to execute phase [query], all shards failed; shardFailures {[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][0]: SearchParseException[[urindex_1494030009479][0]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":["Surface"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:43.836-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:43.836-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][1]: SearchParseException[[urindex_1494030009479][1]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":["Surface"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:43.836-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:43.836-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][2]: SearchParseException[[urindex_1494030009479][2]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":["Surface"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:43.836-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:43.836-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][3]: SearchParseException[[urindex_1494030009479][3]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":["Surface"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:43.836-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:43.836-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][4]: SearchParseException[[urindex_1494030009479][4]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":["Surface"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:43.836-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:43.836-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }
	at org.elasticsearch.action.search.type.TransportSearchTypeAction$BaseAsyncAction.onFirstPhaseResult(TransportSearchTypeAction.java:233)
	at org.elasticsearch.action.search.type.TransportSearchTypeAction$BaseAsyncAction$1.onFailure(TransportSearchTypeAction.java:179)
	at org.elasticsearch.search.action.SearchServiceTransportAction$23.run(SearchServiceTransportAction.java:565)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)



[INFO] [Algorithm] Query received, user id: ${query.user}, item id: ${query.item}
[INFO] [Algorithm] Number of blacklisted items: 0
[INFO] [Algorithm] Query : {"size":20,"query":{"bool":{"should":[{"terms":{"purchase":["Galaxy","Iphone 5","Iphone 4"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:43.957-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:43.957-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}
[ERROR] [ServerActor] Query:

{
    "user": "u-4"
}

Stack Trace:
org.elasticsearch.action.search.SearchPhaseExecutionException: Failed to execute phase [query], all shards failed; shardFailures {[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][0]: SearchParseException[[urindex_1494030009479][0]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":["Galaxy","Iphone 5","Iphone 4"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:43.957-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:43.957-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][1]: SearchParseException[[urindex_1494030009479][1]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":["Galaxy","Iphone 5","Iphone 4"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:43.957-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:43.957-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][2]: SearchParseException[[urindex_1494030009479][2]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":["Galaxy","Iphone 5","Iphone 4"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:43.957-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:43.957-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][3]: SearchParseException[[urindex_1494030009479][3]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":["Galaxy","Iphone 5","Iphone 4"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:43.957-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:43.957-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][4]: SearchParseException[[urindex_1494030009479][4]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":["Galaxy","Iphone 5","Iphone 4"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:43.957-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:43.957-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }
	at org.elasticsearch.action.search.type.TransportSearchTypeAction$BaseAsyncAction.onFirstPhaseResult(TransportSearchTypeAction.java:233)
	at org.elasticsearch.action.search.type.TransportSearchTypeAction$BaseAsyncAction$1.onFailure(TransportSearchTypeAction.java:179)
	at org.elasticsearch.search.action.SearchServiceTransportAction$23.run(SearchServiceTransportAction.java:565)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)



[INFO] [Algorithm] Query received, user id: ${query.user}, item id: ${query.item}
[INFO] [Algorithm] Number of blacklisted items: 0
[INFO] [Algorithm] Query : {"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.002-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.002-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}
[ERROR] [ServerActor] Query:

{
    "user": "u5"
}

Stack Trace:
org.elasticsearch.action.search.SearchPhaseExecutionException: Failed to execute phase [query], all shards failed; shardFailures {[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][0]: SearchParseException[[urindex_1494030009479][0]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.002-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.002-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][1]: SearchParseException[[urindex_1494030009479][1]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.002-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.002-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][2]: SearchParseException[[urindex_1494030009479][2]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.002-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.002-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][3]: SearchParseException[[urindex_1494030009479][3]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.002-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.002-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][4]: SearchParseException[[urindex_1494030009479][4]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.002-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.002-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }
	at org.elasticsearch.action.search.type.TransportSearchTypeAction$BaseAsyncAction.onFirstPhaseResult(TransportSearchTypeAction.java:233)
	at org.elasticsearch.action.search.type.TransportSearchTypeAction$BaseAsyncAction$1.onFailure(TransportSearchTypeAction.java:179)
	at org.elasticsearch.search.action.SearchServiceTransportAction$23.run(SearchServiceTransportAction.java:565)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)



[INFO] [Algorithm] Query received, user id: ${query.user}, item id: ${query.item}
[INFO] [Algorithm] Number of blacklisted items: 0
[INFO] [Algorithm] Query : {"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"terms":{"purchase":["Iphone 6","Iphone 5","Ipad-retina","Galaxy"]}},{"terms":{"view":["Soap","Phones"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.094-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.094-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":["Iphone 4"]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}
[ERROR] [ServerActor] Query:

{
    "item": "Iphone 4"
}

Stack Trace:
org.elasticsearch.action.search.SearchPhaseExecutionException: Failed to execute phase [query], all shards failed; shardFailures {[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][0]: SearchParseException[[urindex_1494030009479][0]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"terms":{"purchase":["Iphone 6","Iphone 5","Ipad-retina","Galaxy"]}},{"terms":{"view":["Soap","Phones"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.094-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.094-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":["Iphone 4"]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][1]: SearchParseException[[urindex_1494030009479][1]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"terms":{"purchase":["Iphone 6","Iphone 5","Ipad-retina","Galaxy"]}},{"terms":{"view":["Soap","Phones"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.094-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.094-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":["Iphone 4"]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][2]: SearchParseException[[urindex_1494030009479][2]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"terms":{"purchase":["Iphone 6","Iphone 5","Ipad-retina","Galaxy"]}},{"terms":{"view":["Soap","Phones"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.094-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.094-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":["Iphone 4"]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][3]: SearchParseException[[urindex_1494030009479][3]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"terms":{"purchase":["Iphone 6","Iphone 5","Ipad-retina","Galaxy"]}},{"terms":{"view":["Soap","Phones"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.094-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.094-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":["Iphone 4"]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][4]: SearchParseException[[urindex_1494030009479][4]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"terms":{"purchase":["Iphone 6","Iphone 5","Ipad-retina","Galaxy"]}},{"terms":{"view":["Soap","Phones"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.094-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.094-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":["Iphone 4"]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }
	at org.elasticsearch.action.search.type.TransportSearchTypeAction$BaseAsyncAction.onFirstPhaseResult(TransportSearchTypeAction.java:233)
	at org.elasticsearch.action.search.type.TransportSearchTypeAction$BaseAsyncAction$1.onFailure(TransportSearchTypeAction.java:179)
	at org.elasticsearch.search.action.SearchServiceTransportAction$23.run(SearchServiceTransportAction.java:565)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)



[INFO] [Algorithm] Query received, user id: ${query.user}, item id: ${query.item}
[INFO] [Algorithm] Number of blacklisted items: 0
[INFO] [Algorithm] Query : {"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"terms":{"purchase":["Iphone 6","Iphone 5","Iphone 4","Galaxy"]}},{"terms":{"view":["Soap","Phones"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.135-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.135-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":["Ipad-retina"]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}
[ERROR] [ServerActor] Query:

{
    "item": "Ipad-retina"
}

Stack Trace:
org.elasticsearch.action.search.SearchPhaseExecutionException: Failed to execute phase [query], all shards failed; shardFailures {[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][0]: SearchParseException[[urindex_1494030009479][0]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"terms":{"purchase":["Iphone 6","Iphone 5","Iphone 4","Galaxy"]}},{"terms":{"view":["Soap","Phones"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.135-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.135-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":["Ipad-retina"]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][1]: SearchParseException[[urindex_1494030009479][1]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"terms":{"purchase":["Iphone 6","Iphone 5","Iphone 4","Galaxy"]}},{"terms":{"view":["Soap","Phones"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.135-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.135-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":["Ipad-retina"]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][2]: SearchParseException[[urindex_1494030009479][2]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"terms":{"purchase":["Iphone 6","Iphone 5","Iphone 4","Galaxy"]}},{"terms":{"view":["Soap","Phones"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.135-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.135-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":["Ipad-retina"]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][3]: SearchParseException[[urindex_1494030009479][3]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"terms":{"purchase":["Iphone 6","Iphone 5","Iphone 4","Galaxy"]}},{"terms":{"view":["Soap","Phones"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.135-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.135-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":["Ipad-retina"]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][4]: SearchParseException[[urindex_1494030009479][4]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"terms":{"purchase":["Iphone 6","Iphone 5","Iphone 4","Galaxy"]}},{"terms":{"view":["Soap","Phones"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.135-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.135-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":["Ipad-retina"]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }
	at org.elasticsearch.action.search.type.TransportSearchTypeAction$BaseAsyncAction.onFirstPhaseResult(TransportSearchTypeAction.java:233)
	at org.elasticsearch.action.search.type.TransportSearchTypeAction$BaseAsyncAction$1.onFailure(TransportSearchTypeAction.java:179)
	at org.elasticsearch.search.action.SearchServiceTransportAction$23.run(SearchServiceTransportAction.java:565)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)



[INFO] [Algorithm] Query received, user id: ${query.user}, item id: ${query.item}
[INFO] [Algorithm] Number of blacklisted items: 0
[INFO] [Algorithm] Query : {"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"terms":{"purchase":["Iphone 5","Galaxy"]}},{"terms":{"view":["Tablets","Phones"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.184-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.184-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":["Nexus"]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}
[ERROR] [ServerActor] Query:

{
    "item": "Nexus"
}

Stack Trace:
org.elasticsearch.action.search.SearchPhaseExecutionException: Failed to execute phase [query], all shards failed; shardFailures {[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][0]: SearchParseException[[urindex_1494030009479][0]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"terms":{"purchase":["Iphone 5","Galaxy"]}},{"terms":{"view":["Tablets","Phones"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.184-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.184-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":["Nexus"]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][1]: SearchParseException[[urindex_1494030009479][1]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"terms":{"purchase":["Iphone 5","Galaxy"]}},{"terms":{"view":["Tablets","Phones"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.184-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.184-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":["Nexus"]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][2]: SearchParseException[[urindex_1494030009479][2]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"terms":{"purchase":["Iphone 5","Galaxy"]}},{"terms":{"view":["Tablets","Phones"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.184-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.184-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":["Nexus"]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][3]: SearchParseException[[urindex_1494030009479][3]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"terms":{"purchase":["Iphone 5","Galaxy"]}},{"terms":{"view":["Tablets","Phones"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.184-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.184-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":["Nexus"]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][4]: SearchParseException[[urindex_1494030009479][4]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"terms":{"purchase":["Iphone 5","Galaxy"]}},{"terms":{"view":["Tablets","Phones"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.184-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.184-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":["Nexus"]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }
	at org.elasticsearch.action.search.type.TransportSearchTypeAction$BaseAsyncAction.onFirstPhaseResult(TransportSearchTypeAction.java:233)
	at org.elasticsearch.action.search.type.TransportSearchTypeAction$BaseAsyncAction$1.onFailure(TransportSearchTypeAction.java:179)
	at org.elasticsearch.search.action.SearchServiceTransportAction$23.run(SearchServiceTransportAction.java:565)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)



[INFO] [Algorithm] Query received, user id: ${query.user}, item id: ${query.item}
[INFO] [Algorithm] Number of blacklisted items: 0
[INFO] [Algorithm] Query : {"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"terms":{"purchase":["Iphone 6","Nexus","Iphone 5","Ipad-retina","Iphone 4"]}},{"terms":{"view":["Phones","Soap","Tablets"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.242-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.242-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":["Galaxy"]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}
[ERROR] [ServerActor] Query:

{
    "item": "Galaxy"
}

Stack Trace:
org.elasticsearch.action.search.SearchPhaseExecutionException: Failed to execute phase [query], all shards failed; shardFailures {[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][0]: SearchParseException[[urindex_1494030009479][0]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"terms":{"purchase":["Iphone 6","Nexus","Iphone 5","Ipad-retina","Iphone 4"]}},{"terms":{"view":["Phones","Soap","Tablets"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.242-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.242-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":["Galaxy"]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][1]: SearchParseException[[urindex_1494030009479][1]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"terms":{"purchase":["Iphone 6","Nexus","Iphone 5","Ipad-retina","Iphone 4"]}},{"terms":{"view":["Phones","Soap","Tablets"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.242-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.242-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":["Galaxy"]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][2]: SearchParseException[[urindex_1494030009479][2]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"terms":{"purchase":["Iphone 6","Nexus","Iphone 5","Ipad-retina","Iphone 4"]}},{"terms":{"view":["Phones","Soap","Tablets"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.242-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.242-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":["Galaxy"]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][3]: SearchParseException[[urindex_1494030009479][3]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"terms":{"purchase":["Iphone 6","Nexus","Iphone 5","Ipad-retina","Iphone 4"]}},{"terms":{"view":["Phones","Soap","Tablets"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.242-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.242-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":["Galaxy"]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][4]: SearchParseException[[urindex_1494030009479][4]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"terms":{"purchase":["Iphone 6","Nexus","Iphone 5","Ipad-retina","Iphone 4"]}},{"terms":{"view":["Phones","Soap","Tablets"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.242-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.242-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":["Galaxy"]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }
	at org.elasticsearch.action.search.type.TransportSearchTypeAction$BaseAsyncAction.onFirstPhaseResult(TransportSearchTypeAction.java:233)
	at org.elasticsearch.action.search.type.TransportSearchTypeAction$BaseAsyncAction$1.onFailure(TransportSearchTypeAction.java:179)
	at org.elasticsearch.search.action.SearchServiceTransportAction$23.run(SearchServiceTransportAction.java:565)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)



[INFO] [Algorithm] Query received, user id: ${query.user}, item id: ${query.item}
[INFO] [Algorithm] Number of blacklisted items: 0
[INFO] [Algorithm] Query : {"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"terms":{"purchase":[]}},{"terms":{"view":[]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.299-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.299-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":["Surface"]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}
[ERROR] [ServerActor] Query:

{
    "item": "Surface"
}

Stack Trace:
org.elasticsearch.action.search.SearchPhaseExecutionException: Failed to execute phase [query], all shards failed; shardFailures {[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][0]: SearchParseException[[urindex_1494030009479][0]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"terms":{"purchase":[]}},{"terms":{"view":[]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.299-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.299-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":["Surface"]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][1]: SearchParseException[[urindex_1494030009479][1]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"terms":{"purchase":[]}},{"terms":{"view":[]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.299-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.299-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":["Surface"]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][2]: SearchParseException[[urindex_1494030009479][2]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"terms":{"purchase":[]}},{"terms":{"view":[]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.299-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.299-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":["Surface"]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][3]: SearchParseException[[urindex_1494030009479][3]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"terms":{"purchase":[]}},{"terms":{"view":[]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.299-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.299-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":["Surface"]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][4]: SearchParseException[[urindex_1494030009479][4]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"terms":{"purchase":[]}},{"terms":{"view":[]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.299-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.299-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":["Surface"]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }
	at org.elasticsearch.action.search.type.TransportSearchTypeAction$BaseAsyncAction.onFirstPhaseResult(TransportSearchTypeAction.java:233)
	at org.elasticsearch.action.search.type.TransportSearchTypeAction$BaseAsyncAction$1.onFailure(TransportSearchTypeAction.java:179)
	at org.elasticsearch.search.action.SearchServiceTransportAction$23.run(SearchServiceTransportAction.java:565)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)



[INFO] [Algorithm] Query received, user id: ${query.user}, item id: ${query.item}
[INFO] [Algorithm] Number of blacklisted items: 0
[INFO] [Algorithm] Query : {"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.351-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.351-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}
[ERROR] [ServerActor] Query:

{
}

Stack Trace:
org.elasticsearch.action.search.SearchPhaseExecutionException: Failed to execute phase [query], all shards failed; shardFailures {[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][0]: SearchParseException[[urindex_1494030009479][0]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.351-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.351-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][1]: SearchParseException[[urindex_1494030009479][1]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.351-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.351-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][2]: SearchParseException[[urindex_1494030009479][2]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.351-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.351-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][3]: SearchParseException[[urindex_1494030009479][3]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.351-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.351-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][4]: SearchParseException[[urindex_1494030009479][4]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.351-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.351-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }
	at org.elasticsearch.action.search.type.TransportSearchTypeAction$BaseAsyncAction.onFirstPhaseResult(TransportSearchTypeAction.java:233)
	at org.elasticsearch.action.search.type.TransportSearchTypeAction$BaseAsyncAction$1.onFailure(TransportSearchTypeAction.java:179)
	at org.elasticsearch.search.action.SearchServiceTransportAction$23.run(SearchServiceTransportAction.java:565)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)



[INFO] [Algorithm] Query received, user id: ${query.user}, item id: ${query.item}
[INFO] [Algorithm] Number of blacklisted items: 0
[INFO] [Algorithm] Query : {"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.413-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.413-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}
[ERROR] [ServerActor] Query:

{
    "user": "xyz"
}

Stack Trace:
org.elasticsearch.action.search.SearchPhaseExecutionException: Failed to execute phase [query], all shards failed; shardFailures {[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][0]: SearchParseException[[urindex_1494030009479][0]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.413-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.413-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][1]: SearchParseException[[urindex_1494030009479][1]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.413-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.413-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][2]: SearchParseException[[urindex_1494030009479][2]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.413-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.413-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][3]: SearchParseException[[urindex_1494030009479][3]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.413-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.413-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][4]: SearchParseException[[urindex_1494030009479][4]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.413-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.413-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }
	at org.elasticsearch.action.search.type.TransportSearchTypeAction$BaseAsyncAction.onFirstPhaseResult(TransportSearchTypeAction.java:233)
	at org.elasticsearch.action.search.type.TransportSearchTypeAction$BaseAsyncAction$1.onFailure(TransportSearchTypeAction.java:179)
	at org.elasticsearch.search.action.SearchServiceTransportAction$23.run(SearchServiceTransportAction.java:565)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)



[INFO] [Algorithm] Query received, user id: ${query.user}, item id: ${query.item}
[INFO] [Algorithm] Number of blacklisted items: 0
[INFO] [Algorithm] Query : {"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.469-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.469-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":["xyz"]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}
[ERROR] [ServerActor] Query:

{
    "item": "xyz"
}

Stack Trace:
org.elasticsearch.action.search.SearchPhaseExecutionException: Failed to execute phase [query], all shards failed; shardFailures {[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][0]: SearchParseException[[urindex_1494030009479][0]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.469-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.469-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":["xyz"]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][1]: SearchParseException[[urindex_1494030009479][1]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.469-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.469-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":["xyz"]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][2]: SearchParseException[[urindex_1494030009479][2]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.469-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.469-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":["xyz"]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][3]: SearchParseException[[urindex_1494030009479][3]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.469-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.469-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":["xyz"]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][4]: SearchParseException[[urindex_1494030009479][4]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.469-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.469-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":["xyz"]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }
	at org.elasticsearch.action.search.type.TransportSearchTypeAction$BaseAsyncAction.onFirstPhaseResult(TransportSearchTypeAction.java:233)
	at org.elasticsearch.action.search.type.TransportSearchTypeAction$BaseAsyncAction$1.onFailure(TransportSearchTypeAction.java:179)
	at org.elasticsearch.search.action.SearchServiceTransportAction$23.run(SearchServiceTransportAction.java:565)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)



[INFO] [Algorithm] Query received, user id: ${query.user}, item id: ${query.item}
[INFO] [Algorithm] Number of blacklisted items: 0
[INFO] [Algorithm] Query : {"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"terms":{"categories":["Tablets"]},"boost":0},{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.511-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.511-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}
[ERROR] [ServerActor] Query:

{
    "fields": [{
        "name": "categories",
        "values": ["Tablets"],
        "bias": -1
    }]
}

Stack Trace:
org.elasticsearch.action.search.SearchPhaseExecutionException: Failed to execute phase [query], all shards failed; shardFailures {[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][0]: SearchParseException[[urindex_1494030009479][0]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"terms":{"categories":["Tablets"]},"boost":0},{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.511-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.511-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [_na] query malformed, must start with start_object]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][1]: SearchParseException[[urindex_1494030009479][1]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"terms":{"categories":["Tablets"]},"boost":0},{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.511-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.511-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [_na] query malformed, must start with start_object]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][2]: SearchParseException[[urindex_1494030009479][2]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"terms":{"categories":["Tablets"]},"boost":0},{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.511-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.511-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [_na] query malformed, must start with start_object]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][3]: SearchParseException[[urindex_1494030009479][3]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"terms":{"categories":["Tablets"]},"boost":0},{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.511-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.511-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [_na] query malformed, must start with start_object]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][4]: SearchParseException[[urindex_1494030009479][4]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"terms":{"categories":["Tablets"]},"boost":0},{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.511-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.511-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [_na] query malformed, must start with start_object]; }
	at org.elasticsearch.action.search.type.TransportSearchTypeAction$BaseAsyncAction.onFirstPhaseResult(TransportSearchTypeAction.java:233)
	at org.elasticsearch.action.search.type.TransportSearchTypeAction$BaseAsyncAction$1.onFailure(TransportSearchTypeAction.java:179)
	at org.elasticsearch.search.action.SearchServiceTransportAction$23.run(SearchServiceTransportAction.java:565)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)



[INFO] [Algorithm] Query received, user id: ${query.user}, item id: ${query.item}
[INFO] [Algorithm] Number of blacklisted items: 0
[INFO] [Algorithm] Query : {"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"terms":{"categories":["Tablets"]},"boost":1.05},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.564-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.564-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}
[ERROR] [ServerActor] Query:

{
    "fields": [{
        "name": "categories",
        "values": ["Tablets"],
        "bias": 1.05
    }]
}

Stack Trace:
org.elasticsearch.action.search.SearchPhaseExecutionException: Failed to execute phase [query], all shards failed; shardFailures {[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][0]: SearchParseException[[urindex_1494030009479][0]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"terms":{"categories":["Tablets"]},"boost":1.05},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.564-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.564-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [_na] query malformed, must start with start_object]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][1]: SearchParseException[[urindex_1494030009479][1]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"terms":{"categories":["Tablets"]},"boost":1.05},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.564-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.564-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [_na] query malformed, must start with start_object]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][2]: SearchParseException[[urindex_1494030009479][2]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"terms":{"categories":["Tablets"]},"boost":1.05},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.564-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.564-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [_na] query malformed, must start with start_object]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][3]: SearchParseException[[urindex_1494030009479][3]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"terms":{"categories":["Tablets"]},"boost":1.05},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.564-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.564-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [_na] query malformed, must start with start_object]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][4]: SearchParseException[[urindex_1494030009479][4]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"terms":{"categories":["Tablets"]},"boost":1.05},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.564-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.564-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [_na] query malformed, must start with start_object]; }
	at org.elasticsearch.action.search.type.TransportSearchTypeAction$BaseAsyncAction.onFirstPhaseResult(TransportSearchTypeAction.java:233)
	at org.elasticsearch.action.search.type.TransportSearchTypeAction$BaseAsyncAction$1.onFailure(TransportSearchTypeAction.java:179)
	at org.elasticsearch.search.action.SearchServiceTransportAction$23.run(SearchServiceTransportAction.java:565)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)



[INFO] [Algorithm] Query received, user id: ${query.user}, item id: ${query.item}
[INFO] [Algorithm] Number of blacklisted items: 0
[INFO] [Algorithm] Query : {"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"terms":{"categories":["Tablets"]},"boost":1.05},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"terms":{"countries":["Estados Unidos Mexicanos"]},"boost":0},{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.607-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.607-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}
[ERROR] [ServerActor] Query:

{
    "fields": [{
        "name": "categories",
        "values": ["Tablets"],
        "bias": 1.05
    }, {
        "name": "countries",
        "values": ["Estados Unidos Mexicanos"],
        "bias": -1
    }]
}

Stack Trace:
org.elasticsearch.action.search.SearchPhaseExecutionException: Failed to execute phase [query], all shards failed; shardFailures {[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][0]: SearchParseException[[urindex_1494030009479][0]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"terms":{"categories":["Tablets"]},"boost":1.05},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"terms":{"countries":["Estados Unidos Mexicanos"]},"boost":0},{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.607-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.607-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [_na] query malformed, must start with start_object]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][1]: SearchParseException[[urindex_1494030009479][1]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"terms":{"categories":["Tablets"]},"boost":1.05},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"terms":{"countries":["Estados Unidos Mexicanos"]},"boost":0},{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.607-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.607-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [_na] query malformed, must start with start_object]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][2]: SearchParseException[[urindex_1494030009479][2]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"terms":{"categories":["Tablets"]},"boost":1.05},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"terms":{"countries":["Estados Unidos Mexicanos"]},"boost":0},{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.607-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.607-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [_na] query malformed, must start with start_object]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][3]: SearchParseException[[urindex_1494030009479][3]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"terms":{"categories":["Tablets"]},"boost":1.05},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"terms":{"countries":["Estados Unidos Mexicanos"]},"boost":0},{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.607-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.607-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [_na] query malformed, must start with start_object]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][4]: SearchParseException[[urindex_1494030009479][4]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":[]}},{"terms":{"categories":["Tablets"]},"boost":1.05},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"terms":{"countries":["Estados Unidos Mexicanos"]},"boost":0},{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.607-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.607-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":[]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [_na] query malformed, must start with start_object]; }
	at org.elasticsearch.action.search.type.TransportSearchTypeAction$BaseAsyncAction.onFirstPhaseResult(TransportSearchTypeAction.java:233)
	at org.elasticsearch.action.search.type.TransportSearchTypeAction$BaseAsyncAction$1.onFailure(TransportSearchTypeAction.java:179)
	at org.elasticsearch.search.action.SearchServiceTransportAction$23.run(SearchServiceTransportAction.java:565)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)



[ERROR] [ServerActor] Query:

{
    "user": "u1",
    "dateRange": {
        "name": "date",
        "before": "2017-05-06T20:20:44Z",
        "after": "2017-05-04T20:20:44Z"
    }
}

Stack Trace:
com.google.gson.JsonSyntaxException: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 6 column 20
	at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:176)
	at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$1.read(ReflectiveTypeAdapterFactory.java:93)
	at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:172)
	at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$1.read(ReflectiveTypeAdapterFactory.java:93)
	at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:172)
	at com.google.gson.Gson.fromJson(Gson.java:803)
	at com.google.gson.Gson.fromJson(Gson.java:768)
	at com.google.gson.Gson.fromJson(Gson.java:717)
	at com.google.gson.Gson.fromJson(Gson.java:689)
	at org.apache.predictionio.workflow.JsonExtractor$.extractWithGson(JsonExtractor.scala:155)
	at org.apache.predictionio.workflow.JsonExtractor$.extract(JsonExtractor.scala:73)
	at org.apache.predictionio.workflow.ServerActor$$anonfun$24.apply(CreateServer.scala:507)
	at org.apache.predictionio.workflow.ServerActor$$anonfun$24.apply(CreateServer.scala:501)
	at spray.routing.ApplyConverterInstances$$anon$22$$anonfun$apply$1.apply(ApplyConverterInstances.scala:25)
	at spray.routing.ApplyConverterInstances$$anon$22$$anonfun$apply$1.apply(ApplyConverterInstances.scala:24)
	at spray.routing.ConjunctionMagnet$$anon$1$$anon$2$$anonfun$happly$1$$anonfun$apply$1.apply(Directive.scala:38)
	at spray.routing.ConjunctionMagnet$$anon$1$$anon$2$$anonfun$happly$1$$anonfun$apply$1.apply(Directive.scala:37)
	at spray.routing.directives.BasicDirectives$$anon$1.happly(BasicDirectives.scala:26)
	at spray.routing.ConjunctionMagnet$$anon$1$$anon$2$$anonfun$happly$1.apply(Directive.scala:37)
	at spray.routing.ConjunctionMagnet$$anon$1$$anon$2$$anonfun$happly$1.apply(Directive.scala:36)
	at spray.routing.directives.BasicDirectives$$anon$2.happly(BasicDirectives.scala:79)
	at spray.routing.Directive$$anon$7$$anonfun$happly$4.apply(Directive.scala:86)
	at spray.routing.Directive$$anon$7$$anonfun$happly$4.apply(Directive.scala:86)
	at spray.routing.directives.BasicDirectives$$anon$3$$anonfun$happly$1.apply(BasicDirectives.scala:92)
	at spray.routing.directives.BasicDirectives$$anon$3$$anonfun$happly$1.apply(BasicDirectives.scala:92)
	at spray.routing.directives.ExecutionDirectives$$anonfun$detach$1$$anonfun$apply$7$$anonfun$apply$3.apply$mcV$sp(ExecutionDirectives.scala:89)
	at spray.routing.directives.ExecutionDirectives$$anonfun$detach$1$$anonfun$apply$7$$anonfun$apply$3.apply(ExecutionDirectives.scala:89)
	at spray.routing.directives.ExecutionDirectives$$anonfun$detach$1$$anonfun$apply$7$$anonfun$apply$3.apply(ExecutionDirectives.scala:89)
	at scala.concurrent.impl.Future$PromiseCompletingRunnable.liftedTree1$1(Future.scala:24)
	at scala.concurrent.impl.Future$PromiseCompletingRunnable.run(Future.scala:24)
	at scala.concurrent.impl.ExecutionContextImpl$$anon$3.exec(ExecutionContextImpl.scala:107)
	at scala.concurrent.forkjoin.ForkJoinTask.doExec(ForkJoinTask.java:260)
	at scala.concurrent.forkjoin.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:1339)
	at scala.concurrent.forkjoin.ForkJoinPool.runWorker(ForkJoinPool.java:1979)
	at scala.concurrent.forkjoin.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:107)
Caused by: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 6 column 20
	at com.google.gson.stream.JsonReader.beginObject(JsonReader.java:374)
	at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:165)
	... 34 more



[INFO] [Algorithm] Query received, user id: ${query.user}, item id: ${query.item}
[INFO] [Algorithm] Number of blacklisted items: 0
[INFO] [Algorithm] Query : {"size":20,"query":{"bool":{"should":[{"terms":{"purchase":["Galaxy","Iphone 6","Ipad-retina","Iphone 5","Iphone 4"]}},{"terms":{"purchase":["Iphone 6","Iphone 5","Ipad-retina","Galaxy"]}},{"terms":{"view":["Soap","Phones"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.707-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.707-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":["Iphone 4"]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}
[ERROR] [ServerActor] Query:

{
    "user": "u1",
    "item": "Iphone 4"
}

Stack Trace:
org.elasticsearch.action.search.SearchPhaseExecutionException: Failed to execute phase [query], all shards failed; shardFailures {[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][0]: SearchParseException[[urindex_1494030009479][0]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":["Galaxy","Iphone 6","Ipad-retina","Iphone 5","Iphone 4"]}},{"terms":{"purchase":["Iphone 6","Iphone 5","Ipad-retina","Galaxy"]}},{"terms":{"view":["Soap","Phones"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.707-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.707-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":["Iphone 4"]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][1]: SearchParseException[[urindex_1494030009479][1]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":["Galaxy","Iphone 6","Ipad-retina","Iphone 5","Iphone 4"]}},{"terms":{"purchase":["Iphone 6","Iphone 5","Ipad-retina","Galaxy"]}},{"terms":{"view":["Soap","Phones"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.707-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.707-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":["Iphone 4"]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][2]: SearchParseException[[urindex_1494030009479][2]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":["Galaxy","Iphone 6","Ipad-retina","Iphone 5","Iphone 4"]}},{"terms":{"purchase":["Iphone 6","Iphone 5","Ipad-retina","Galaxy"]}},{"terms":{"view":["Soap","Phones"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.707-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.707-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":["Iphone 4"]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][3]: SearchParseException[[urindex_1494030009479][3]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":["Galaxy","Iphone 6","Ipad-retina","Iphone 5","Iphone 4"]}},{"terms":{"purchase":["Iphone 6","Iphone 5","Ipad-retina","Galaxy"]}},{"terms":{"view":["Soap","Phones"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.707-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.707-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":["Iphone 4"]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }{[D7FiPNLsSYiYjKQzpg3AMw][urindex_1494030009479][4]: SearchParseException[[urindex_1494030009479][4]: from[-1],size[20]: Parse Failure [Failed to parse source [{"size":20,"query":{"bool":{"should":[{"terms":{"purchase":["Galaxy","Iphone 6","Ipad-retina","Iphone 5","Iphone 4"]}},{"terms":{"purchase":["Iphone 6","Iphone 5","Ipad-retina","Galaxy"]}},{"terms":{"view":["Soap","Phones"]}},{"constant_score":{"filter":{"match_all":{}},"boost":0}}],"must":[{"constant_score":{"filter":{"range":{"available":{"lte":"2017-05-05T20:20:44.707-04:00"}}},"boost":0}},{"constant_score":{"filter":{"range":{"expires":{"gt":"2017-05-05T20:20:44.707-04:00"}}},"boost":0}}],"must_not":{"ids":{"values":["Iphone 4"]},"boost":0},"minimum_should_match":1}},"sort":[{"_score":{"order":"desc"}},{"popRank":{"unmapped_type":"double","order":"desc"}}]}]]]; nested: QueryParsingException[[urindex_1494030009479] [bool] query does not support [must_not]]; }
	at org.elasticsearch.action.search.type.TransportSearchTypeAction$BaseAsyncAction.onFirstPhaseResult(TransportSearchTypeAction.java:233)
	at org.elasticsearch.action.search.type.TransportSearchTypeAction$BaseAsyncAction$1.onFailure(TransportSearchTypeAction.java:179)
	at org.elasticsearch.search.action.SearchServiceTransportAction$23.run(SearchServiceTransportAction.java:565)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)



                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       [INFO] [MasterActor] Stop server command received.
[INFO] [MasterActor] Server is shutting down.
